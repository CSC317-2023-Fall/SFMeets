<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=devce-width, initial-scale=1.0">
        <title>Sign Up - SFSU Meets</title>
        <link rel="stylesheet" href="stylesheets/stylesheet.css">
        <link rel="stylesheet" href="stylesheets/regi-stylesheet.css">
        <link rel="icon" href="images/GatorLogo_blk.png" type="image">
    </head>
    <body>
        <header>
            <a href="index.html"><img src="images/headerImg.png" alt="Homepage Link" style="width: auto;height: 56px;"></a>
        </header>
        <nav id="navBar">
            <ul>
                <li><img class="logo" src="images/headerImg.png"></li>
                <li><a href="index.html">Home</a></li>
                <li class="dropdown">
                    <a class="dropbtn">Organizations ▾</a>
                    <div class="dropdown-content">
                        <a href="organizations.html">All Organizations</a>
                        <a href="createorganization.html">Create an Organization</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a class="dropbtn">Events ▾</a>
                    <div class="dropdown-content">
                        <a href="events.html">All Events</a>
                        <a href="createevent.html">Create an Event</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a class="dropbtn">Help ▾</a>
                    <div class="dropdown-content">
                        <a href="about.html">About</a>
                        <a href="faq.html">FAQ</a>
                        <a href="contact.html">Contact</a>
                    </div>
                </li>
                <li>
                    <form action="search.php" method="post">
                        <input type="text" name="search" placeholder="Search">
                        <button class="search" type="submit" name="submit-search"><img src="images/magnifyingglass.png" width="10"></button>
                    </form>
                </li>
                <li id="loginbuttons">
                    <form>
                        <button class="log" type="submit" formaction="login.html">Login</button>
                        <button class="reg" type="submit" formaction="signup.html">Sign Up</button>
                    </form>
                </li>
                <li class="dropdown" id="accountinfo">
                    <a class="dropbtn" id="name"></a>
                    <div class="dropdown-content">
                        <a href="account_page.html">Profile</a>
                        <a href="" id="logoutbutton" onclick="logout()">Logout</a>
                    </div>
            </ul>
            <script src="scripts/navbar.js"></script>
        </nav>
        <main>
            <form action="/account_page.html">
            <div class="container">
                <h1>Register</h1>
                <p>To create an account please fill in this form.</p>
                <hr>

                <div id="errorMsg_sign" class="errorMsg_sign">

                </div>

                <label for="first_name"><b>First Name</b></label>
                <input type="text" placeholder="Enter First Name" name="first_name" id="first_name" required>

                <label for="last_name"><b>Last Name</b></label>
                <input type="text" placeholder="Enter Last Name" name="last_name" id="last_name" required>
                <br>
                <label for="sfsu_id"><b>SFSU ID</b></label>
                <input type="text" placeholder="Enter your SFSU ID" name="sfsu_id" id="sfsu_id" pattern="[0-9]{9}" required>

                <label for="email"><b>Email</b></label>
                <input type="email" placeholder="Enter Email" name="email" id="email" required>

                <label for="pass"><b>Password</b></label>
                <input type="password" placeholder="Enter Password" name="pass_sign" id="pass_sign" required>

                <div class="pass_pop" id="pass_pop">
                    <h3>Must contain the following:</h3>
                    <p id="lower" class="invalid">A lowercase letter</p>
                    <p id="upper" class="invalid">A uppercase latter</p>
                    <p id="number" class="invalid">A number</p>
                    <p id="min" class="invalid">Minumum of 8 characters</p>
                </div>

                <label for="pass_repeat"><b>Confirm Password</b></label>
                <input type="password" placeholder="Re-enter Password" name="pass_repeat" id="pass_repeat" required>

                <div class="pass_check" id="pass_check">
                    <p id="same" class="invalid">Does not match</p>
                </div>

                <button type="submit" formmethod="get" class="register_button" id="register_button">Register</button>
                <hr>
                <p>Already have an account? <a href="login.html">Login in!</a></p>

                
            </div>
            </form>
            
        </main>
        <br>
        <footer>
            <a href="index.html">Home</a>
            |
            <a href="about.html">About</a>
            |
            <a href="faq.html">FAQ</a>
            |
            <a href="contact.html">Contact</a>
            <br><br>
            <a href="https://github.com/CSC317-2023-Fall/csc317-group-project-website-ColeChiodo" target="_blank"><img src="images/github.svg" alt="github link"></a><br>
            <br>
            SFSU Meets<br>
            Window Group
        </footer>
        <script>
            const userInput = document.getElementById("pass_sign");
            const checkpass = document.getElementById("pass_repeat");
            const lower = document.getElementById("lower");
            const upper = document.getElementById("upper");
            const number = document.getElementById("number");
            const min = document.getElementById("min");
            const regi_button = document.getElementById("register_button");
            const same = document.getElementById("same");

            userInput.onfocus = function(){
                document.getElementById("pass_pop").style.display = "block";
            }

            userInput.onblur = function(){
                document.getElementById("pass_pop").style.display = "none"
            }

            userInput.onkeyup = function(){
                const lowerCheck = /[a-z]/g;
                if(userInput.value.match(lowerCheck)){
                    lower.classList.remove("invalid");
                    lower.classList.add("valid");
                }else{
                    lower.classList.remove("valid");
                    lower.classList.add("invalid");
                }

                const upperCheck = /[A-Z]/g;
                if(userInput.value.match(upperCheck)){
                    upper.classList.remove("invalid");
                    upper.classList.add("valid");
                }else{
                    upper.classList.remove("valid");
                    upper.classList.add("invalid");
                }

                const numberCheck = /[0-9]/g;
                if(userInput.value.match(numberCheck)){
                    number.classList.remove("invalid");
                    number.classList.add("valid");
                }else{
                    number.classList.remove("valid");
                    number.classList.add("invalid");
                }

                if(userInput.value.length >= 8){
                    min.classList.remove("invalid");
                    min.classList.add("valid");
                }else{
                    min.classList.remove("valid");
                    min.classList.add("invalid");
                }
            }

            checkpass.onfocus = function(){
                document.getElementById("pass_check").style.display = "block";
            }

            checkpass.onblur = function(){
                document.getElementById("pass_check").style.display = "none";
            }

            checkpass.onkeyup = function(){
                if(checkpass.value == (userInput.value)){
                    same.classList.remove("invalid");
                    same.classList.add("valid");
                }else{
                    same.classList.remove("valid");
                    same.classList.add("invalid");
                }
            }

            checkpass.onclick = function(){
                if(checkpass.value == (userInput.value)){
                    same.classList.remove("invalid");
                    same.classList.add("valid");
                }else{
                    same.classList.remove("valid");
                    same.classList.add("invalid");
                }
            }

            function setCookie(cname, cvalue, exdays){
                const exp = new Date();
                exp.setTime(exp.getTime() + (exdays*24*69*60*1000));
                let expires = "expires=" + exp.toUTCString();
                document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
            }

            function getCookies(cname){
                let name = cname + "=";
                let contentCookie = decodeURIComponent(document.cookie);
                let ca = contentCookie.split(';');
                for(let i = 0; i < ca.length; i++){
                    let c = ca[i];
                    while (c.charAt(0) == ' '){
                        c = c.substring(1);    
                    }
                    if(c.indexOf(name) == 0){
                    return c.substring(name.length, c.length);
                    }
                }
                return "";
            }

            function checkLogin(){
                let logged = getCookies("loggedIn");
                if(logged === "true"){
                    alert("You have already logged in");
                    location.replace("/account_page.html");
                }
            }

            regi_button.addEventListener("click" , (s) => {
                s.preventDefault();
                if(lower.classList.contains("valid") && upper.classList.contains("valid") && same.classList.contains("valid") 
                && number.classList.contains("valid") && min.classList.contains("valid")){
                    alert("Sign up successful");
                    location.replace("/login.html");
                }else{
                    document.getElementById("errorMsg_sign").style.padding = "3px";
                    document.getElementById("errorMsg_sign").style.border = "thin solid darkred";
                    document.getElementById("errorMsg_sign").innerHTML = "<p>A Section Was Incorrectly Filled Out</p>";
                }
            })

            
        </script>
    </body>
</html>